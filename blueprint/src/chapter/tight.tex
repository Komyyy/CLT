\chapter{Tight families of measures}

\begin{definition}\label{def:tight}
\lean{MeasureTheory.Tight} \leanok
A set $S$ of measures on $\Omega$ is tight if for all $\varepsilon > 0$ there exists a compact set $K$ such that for all $\mu \in S$, $\mu(K^c) \le \varepsilon$.
\end{definition}

\begin{lemma}\label{lem:tight_of_cvg}
\uses{def:tight}
If $\mu_1, \mu_2, \ldots$ converge weakly to $\mu$, then $\{\mu_n \mid n \in \mathbb{N}\}$ is tight.
\end{lemma}

\begin{proof}
Fix $r > 0$ and let $f(x) = (1 - (r - \vert x \vert)_+)_+$ . $f$ is a bounded continuous function. Then
\begin{align*}
\limsup_{n \to +\infty} \mu_n\{\vert X \vert > r\}
\le \lim_{n \to +\infty} \mu_n\left[ f \right]
= \mu[f]
\le \mu\{\vert X \vert > r - 1\} \: .
\end{align*}
As $r \to +\infty$, the last quantity tends to 0.
\end{proof}

\begin{lemma}\label{tight_iff_cvg_probability}
\uses{def:tight, def:cvg_probability}
For random variables $(X_i)_{i \in \mathbb{N}}$ (TODO in which kind of space?), the two following conditions are equivalent:
\begin{itemize}
	\item $(\mathcal L(X_n))$ is tight,
	\item For all $(c_n) \ge 0$ with $c_n \to 0$, $c_n X_n \xrightarrow{p} 0$.
\end{itemize}
\end{lemma}

\begin{proof}

\end{proof}


\section{Prokhorov's theorem}

\begin{lemma}\label{lem:exists_finite_union_inter_lt}
Let $(U_n)_{n \in \mathbb{N}}$ be measurable sets such that $\bigcap_{n=1}^{+ \infty} U_n = \emptyset$. Let $\mu$ be a measure and let $\varepsilon > 0$. Then there exists a finite set $S \subseteq \mathbb{N}$ such that $\mu(\bigcap_{n \in S} U_n) < \varepsilon$.
\end{lemma}

\begin{proof}
RÃ©my: I have a proof of that result in the project formalizing Kolmogorov's extension theorem (joint work with Peter Pfaffelhuber).
\end{proof}

\begin{lemma}\label{lem:prokhorov_aux1}
Let $E$ be a complete separable metric space and let $S \subseteq \mathcal P(E)$. If the closure of $S$ is compact, then $S$ is tight.
\end{lemma}

\begin{proof}\uses{lem:exists_finite_union_inter_lt}
\end{proof}

\begin{theorem}[Prokhorov's theorem]\label{thm:prokhorov}
\uses{def:tight}
Let $E$ be a complete separable metric space and let $S \subseteq \mathcal P(E)$. Then the following are equivalent:
\begin{enumerate}
	\item $S$ is tight.
	%\item For all $\varepsilon > 0$ there exists a compact set $K$ such that for all $\mu \in S$, $\mu((K^\varepsilon)^c) \le \varepsilon$, where $K^\varepsilon$ is the $\varepsilon$-thickening of $K$.
	\item the closure of $S$ is compact.
\end{enumerate}
\end{theorem}

\begin{proof}\uses{lem:prokhorov_aux1}
Lemma~\ref{lem:prokhorov_aux1} provides one direction.

TODO: proof of the other one.
\end{proof}

\begin{lemma}\label{lem:relatively_compact_of_tight}
Let $E$ be a metric space and let $S \subseteq \mathcal P(E)$ be tight. Then the closure of $S$ is compact.
\end{lemma}

\begin{proof}\uses{thm:prokhorov}
\end{proof}
